---
version: 1
interactions:
- request:
    body: '{"id":"87221b69-c0fe-443d-985b-321d7cbd0af9","name":"test-cli-get-policy","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","created_at":"2024-04-09T09:50:19.674563Z","updated_at":"2024-04-09T09:50:19.674563Z","description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/account/v3/projects
    method: POST
  response:
    body: '{"id":"87221b69-c0fe-443d-985b-321d7cbd0af9","name":"test-cli-get-policy","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","created_at":"2024-04-09T09:50:19.674563Z","updated_at":"2024-04-09T09:50:19.674563Z","description":""}'
    headers:
      Content-Length:
      - "234"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Apr 2024 09:50:19 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 9d33a1d3-7f63-4762-8b00-aae9002ed410
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"id":"abb2fc89-6c2b-46af-939c-3725a1fe0df8","name":"test-cli-get-policy","description":"","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","created_at":"2024-04-09T09:50:19.871600Z","updated_at":"2024-04-09T09:50:19.871600Z","editable":true,"nb_rules":0,"nb_scopes":0,"nb_permission_sets":0,"tags":[],"no_principal":true}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"id":"abb2fc89-6c2b-46af-939c-3725a1fe0df8","name":"test-cli-get-policy","description":"","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","created_at":"2024-04-09T09:50:19.871600Z","updated_at":"2024-04-09T09:50:19.871600Z","editable":true,"nb_rules":0,"nb_scopes":0,"nb_permission_sets":0,"tags":[],"no_principal":true}'
    headers:
      Content-Length:
      - "330"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Apr 2024 09:50:19 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - bbc69bcb-3bbe-4e21-b164-5b1a68d3dede
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"id":"abb2fc89-6c2b-46af-939c-3725a1fe0df8","name":"test-cli-get-policy","description":"","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","created_at":"2024-04-09T09:50:19.871600Z","updated_at":"2024-04-09T09:50:19.871600Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"tags":[],"no_principal":true}'
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/policies/abb2fc89-6c2b-46af-939c-3725a1fe0df8
    method: GET
  response:
    body: '{"id":"abb2fc89-6c2b-46af-939c-3725a1fe0df8","name":"test-cli-get-policy","description":"","organization_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b","created_at":"2024-04-09T09:50:19.871600Z","updated_at":"2024-04-09T09:50:19.871600Z","editable":true,"nb_rules":1,"nb_scopes":1,"nb_permission_sets":1,"tags":[],"no_principal":true}'
    headers:
      Content-Length:
      - "330"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Apr 2024 09:50:19 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 883ee432-050b-4d33-8367-80be163a55ab
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"rules":[{"id":"bb38e001-5eb5-428c-b1f9-0eab9e055b7f","permission_set_names":["IPAMReadOnly"],"permission_sets_scope_type":"projects","project_ids":["87221b69-c0fe-443d-985b-321d7cbd0af9"]}],"total_count":1}'
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/rules?page=1&policy_id=abb2fc89-6c2b-46af-939c-3725a1fe0df8
    method: GET
  response:
    body: '{"rules":[{"id":"bb38e001-5eb5-428c-b1f9-0eab9e055b7f","permission_set_names":["IPAMReadOnly"],"permission_sets_scope_type":"projects","project_ids":["87221b69-c0fe-443d-985b-321d7cbd0af9"]}],"total_count":1}'
    headers:
      Content-Length:
      - "208"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Apr 2024 09:50:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - e501c250-fdab-4c34-8c59-4cc0c2bb03f6
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/policies/abb2fc89-6c2b-46af-939c-3725a1fe0df8
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Apr 2024 09:50:20 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - adf1f641-8eb0-406f-86b4-966c3f242b83
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/account/v3/projects/87221b69-c0fe-443d-985b-321d7cbd0af9
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Tue, 09 Apr 2024 09:50:21 GMT
      Server:
      - Scaleway API Gateway (fr-par-1;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 9b5d8e73-a6e9-454b-9a7a-757dcc89b602
    status: 204 No Content
    code: 204
    duration: ""
