---
version: 1
interactions:
- request:
    body: '{"id":"cc038cdc-71ed-4835-9dff-2725a61c0bce", "name":"test-cli-iam-create-rule",
      "organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42", "created_at":"2024-08-21T15:44:34.072629Z",
      "updated_at":"2024-08-21T15:44:34.072629Z", "description":""}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.23.0; darwin; arm64) cli-e2e-test
    url: https://api.scaleway.com/account/v3/projects
    method: POST
  response:
    body: '{"id":"cc038cdc-71ed-4835-9dff-2725a61c0bce", "name":"test-cli-iam-create-rule",
      "organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42", "created_at":"2024-08-21T15:44:34.072629Z",
      "updated_at":"2024-08-21T15:44:34.072629Z", "description":""}'
    headers:
      Content-Length:
      - "244"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 21 Aug 2024 15:44:34 GMT
      Server:
      - Scaleway API Gateway (fr-par-2;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 9ad7a4f8-cc10-4640-b894-a0697515e764
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"id":"daa5688a-7192-48f4-95ae-dc84427373cd", "name":"test-cli-iam-create-rule",
      "description":"", "organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42",
      "created_at":"2024-08-21T15:44:34.278325Z", "updated_at":"2024-08-21T15:44:34.278325Z",
      "editable":true, "nb_rules":0, "nb_scopes":0, "nb_permission_sets":0, "tags":[],
      "no_principal":true}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.23.0; darwin; arm64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/policies
    method: POST
  response:
    body: '{"id":"daa5688a-7192-48f4-95ae-dc84427373cd", "name":"test-cli-iam-create-rule",
      "description":"", "organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42",
      "created_at":"2024-08-21T15:44:34.278325Z", "updated_at":"2024-08-21T15:44:34.278325Z",
      "editable":true, "nb_rules":0, "nb_scopes":0, "nb_permission_sets":0, "tags":[],
      "no_principal":true}'
    headers:
      Content-Length:
      - "346"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 21 Aug 2024 15:44:34 GMT
      Server:
      - Scaleway API Gateway (fr-par-2;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 3a66dd7b-4847-4537-9422-a4679d84260a
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"rules":[{"id":"bf7a0f99-697b-47b2-b249-05c073776212", "permission_set_names":["IPAMReadOnly"],
      "permission_sets_scope_type":"projects", "condition":"", "project_ids":["cc038cdc-71ed-4835-9dff-2725a61c0bce"]}],
      "total_count":1}'
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.23.0; darwin; arm64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/rules?page=1&policy_id=daa5688a-7192-48f4-95ae-dc84427373cd
    method: GET
  response:
    body: '{"rules":[{"id":"bf7a0f99-697b-47b2-b249-05c073776212", "permission_set_names":["IPAMReadOnly"],
      "permission_sets_scope_type":"projects", "condition":"", "project_ids":["cc038cdc-71ed-4835-9dff-2725a61c0bce"]}],
      "total_count":1}'
    headers:
      Content-Length:
      - "228"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 21 Aug 2024 15:44:34 GMT
      Server:
      - Scaleway API Gateway (fr-par-2;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 5326fd51-47e3-449a-943c-fe5ac1d44bcd
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"rules":[{"id":"2c9c03cd-1738-43fa-adca-7458f75755a3", "permission_set_names":["IPAMReadOnly"],
      "permission_sets_scope_type":"projects", "condition":"", "project_ids":["cc038cdc-71ed-4835-9dff-2725a61c0bce"]},
      {"id":"06b5a4ad-777e-4d36-83bf-957dc238c3e5", "permission_set_names":["VPCReadOnly"],
      "permission_sets_scope_type":"projects", "condition":"", "project_ids":["cc038cdc-71ed-4835-9dff-2725a61c0bce"]}]}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.23.0; darwin; arm64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/rules
    method: PUT
  response:
    body: '{"rules":[{"id":"2c9c03cd-1738-43fa-adca-7458f75755a3", "permission_set_names":["IPAMReadOnly"],
      "permission_sets_scope_type":"projects", "condition":"", "project_ids":["cc038cdc-71ed-4835-9dff-2725a61c0bce"]},
      {"id":"06b5a4ad-777e-4d36-83bf-957dc238c3e5", "permission_set_names":["VPCReadOnly"],
      "permission_sets_scope_type":"projects", "condition":"", "project_ids":["cc038cdc-71ed-4835-9dff-2725a61c0bce"]}]}'
    headers:
      Content-Length:
      - "411"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 21 Aug 2024 15:44:34 GMT
      Server:
      - Scaleway API Gateway (fr-par-2;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 79495c65-b693-4c88-a92c-1f0123573b66
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.23.0; darwin; arm64) cli-e2e-test
    url: https://api.scaleway.com/iam/v1alpha1/policies/daa5688a-7192-48f4-95ae-dc84427373cd
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 21 Aug 2024 15:44:34 GMT
      Server:
      - Scaleway API Gateway (fr-par-2;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 4a976b9c-62ea-4708-a094-4d7d9b6a04a4
    status: 204 No Content
    code: 204
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.23.0; darwin; arm64) cli-e2e-test
    url: https://api.scaleway.com/account/v3/projects/cc038cdc-71ed-4835-9dff-2725a61c0bce
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 21 Aug 2024 15:44:35 GMT
      Server:
      - Scaleway API Gateway (fr-par-2;edge01)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 7784da5b-abf3-463a-8801-94c26ac0b5b6
    status: 204 No Content
    code: 204
    duration: ""
