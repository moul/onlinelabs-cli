---
version: 1
interactions:
- request:
    body: '{"organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","name":"cli-test","engine":"PostgreSQL-12","user_name":"foobar","password":"{4xdl*#QOoP+\u00263XRkGA)]","node_type":"db-dev-s","is_ha_cluster":false,"disable_backup":false,"tags":null}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances
    method: POST
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"provisioning","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:12:56 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 8eab0fbd-bc7c-481a-8c2e-790509cf63a5
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"provisioning","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:12:56 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b94461c6-c6c3-4aa5-9654-ca01bd884991
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"provisioning","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:13:11 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - d7f372a3-76c7-4611-8d58-6f352d1f5919
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"provisioning","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:13:26 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 777c576c-d57b-4e4d-8c9c-0c306b3d4c78
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"provisioning","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:13:42 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b568ce6f-9c86-4e88-9685-29e573b93707
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:13:57 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 1056a0b3-0dec-48f9-bbf9-844d8871e5eb
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:14:12 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - a48f453a-d498-4142-9508-7b4335b4a603
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:14:27 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 537944ba-5cc5-495d-91bd-6c4889153393
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:14:42 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - a16b8a13-3b83-4114-a0b9-8ca56e2158e7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:14:57 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - c73221b9-00c9-4f70-b2aa-ad9df590dc45
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:15:12 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 9f34ad0e-bc66-445c-b0f0-84920870d0d0
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:15:27 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 95ebe288-e8fc-4b91-8dd9-10220d022cef
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"initializing","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "443"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:15:42 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ad728217-1d7d-401c-be17-43dd0cf361a7
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/instances/00a97151-9ecc-4b60-bbcf-da6a4f821590
    method: GET
  response:
    body: '{"id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","name":"cli-test","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"ready","engine":"PostgreSQL-12","endpoint":{"ip":"51.158.128.5","port":41951,"name":null},"tags":[],"settings":[{"name":"work_mem","value":"4"},{"name":"max_connections","value":"100"},{"name":"effective_cache_size","value":"1300"},{"name":"maintenance_work_mem","value":"150"},{"name":"max_parallel_workers","value":"0"},{"name":"max_parallel_workers_per_gather","value":"0"}],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-13T13:12:55.983025Z","region":"nl-ams"}'
    headers:
      Content-Length:
      - "742"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:15:58 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - fbe09208-b565-493f-926b-be45a4bc273b
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"instance_id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","database_name":"rdb","name":"foobar","expires_at":"2999-01-02T15:04:05-07:00"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/nl-ams/backups
    method: POST
  response:
    body: '{"id":"05d79124-9a77-4721-8e77-6ca8c4c5bbc2","instance_id":"00a97151-9ecc-4b60-bbcf-da6a4f821590","database_name":"rdb","name":"foobar","status":"creating","size":null,"expires_at":"2999-01-02T22:04:05Z","created_at":"2020-07-13T13:15:59.393873Z","updated_at":null,"instance_name":"cli-test","download_url":null,"download_url_expires_at":null,"region":"nl-ams"}'
    headers:
      Content-Length:
      - "361"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 13 Jul 2020 13:15:59 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 95bcd98c-94c5-4aff-98e3-0a9a4c16cf33
    status: 200 OK
    code: 200
    duration: ""
