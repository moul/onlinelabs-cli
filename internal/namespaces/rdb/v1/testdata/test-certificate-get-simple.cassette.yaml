---
version: 1
interactions:
- request:
    body: '{"organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","name":"foobar","engine":"PostgreSQL-12","user_name":"foobar","password":"\"12345678pP.8\"","node_type":"db-dev-s","is_ha_cluster":false,"disable_backup":false,"tags":null}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/fr-par/instances
    method: POST
  response:
    body: '{"id":"05dc016d-9f0c-4b39-805a-c954c51a8bc6","name":"foobar","organization_id":"951df375-e094-4d26-97c1-ba548eeb9c42","status":"provisioning","engine":"PostgreSQL-12","endpoint":null,"tags":[],"settings":[],"backup_schedule":{"frequency":24,"retention":7,"disabled":false},"is_ha_cluster":false,"read_replicas":[],"node_type":"db-dev-s","volume":{"type":"lssd","size":5000000000},"created_at":"2020-07-06T12:14:23.935340Z","region":"fr-par"}'
    headers:
      Content-Length:
      - "441"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 06 Jul 2020 12:14:24 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 7414fb7e-83ac-459b-8a2b-602d9607eaf1
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.6+dev (go1.14.4; darwin; amd64) cli-e2e-test
    url: https://api.scaleway.com/rdb/v1/regions/fr-par/instances/05dc016d-9f0c-4b39-805a-c954c51a8bc6/certificate
    method: GET
  response:
    body: '{"message":"05dc016d-9f0c-4b39-805a-c954c51a8bc6 instance doesn''t have
      a valid status to perform this operation. Valid status: locked, error, autohealing,
      disk_full, ready, configuring, backuping"}'
    headers:
      Content-Length:
      - "197"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Mon, 06 Jul 2020 12:14:24 GMT
      Server:
      - agw_listener_public_vip
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - ef40291e-df47-4451-97be-8311d0794ed5
    status: 400 Bad Request
    code: 400
    duration: ""
