---
version: 1
interactions:
- request:
    body: '{"id":"78cd6067-45ed-4e5c-85ba-1e1eca66e660", "project_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b",
      "name":"cli-test-access-secret", "status":"ready", "created_at":"2024-04-03T07:23:26.018474Z",
      "updated_at":"2024-04-03T07:23:26.018474Z", "tags":[], "version_count":0, "description":"",
      "managed":false, "type":"opaque", "protected":false, "path":"/", "ephemeral_policy":null,
      "region":"fr-par"}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/secret-manager/v1beta1/regions/fr-par/secrets
    method: POST
  response:
    body: '{"id":"78cd6067-45ed-4e5c-85ba-1e1eca66e660", "project_id":"ee7bd9e1-9cbd-4724-b2f4-19e50f3cf38b",
      "name":"cli-test-access-secret", "status":"ready", "created_at":"2024-04-03T07:23:26.018474Z",
      "updated_at":"2024-04-03T07:23:26.018474Z", "tags":[], "version_count":0, "description":"",
      "managed":false, "type":"opaque", "protected":false, "path":"/", "ephemeral_policy":null,
      "region":"fr-par"}'
    headers:
      Content-Length:
      - "394"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 03 Apr 2024 07:23:26 GMT
      Server:
      - Scaleway API Gateway (fr-par-3;edge02)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - b2964447-648a-40fd-a717-9e8f4ccce651
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"revision":1, "secret_id":"78cd6067-45ed-4e5c-85ba-1e1eca66e660", "status":"enabled",
      "created_at":"2024-04-03T07:23:26.186144Z", "updated_at":"2024-04-03T07:23:26.186144Z",
      "description":"", "latest":true, "ephemeral_properties":null}'
    form: {}
    headers:
      Content-Type:
      - application/json
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/secret-manager/v1beta1/regions/fr-par/secrets/78cd6067-45ed-4e5c-85ba-1e1eca66e660/versions
    method: POST
  response:
    body: '{"revision":1, "secret_id":"78cd6067-45ed-4e5c-85ba-1e1eca66e660", "status":"enabled",
      "created_at":"2024-04-03T07:23:26.186144Z", "updated_at":"2024-04-03T07:23:26.186144Z",
      "description":"", "latest":true, "ephemeral_properties":null}'
    headers:
      Content-Length:
      - "236"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 03 Apr 2024 07:23:26 GMT
      Server:
      - Scaleway API Gateway (fr-par-3;edge02)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 33b54485-121f-4300-87b0-112ff99f0b61
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: '{"secret_id":"78cd6067-45ed-4e5c-85ba-1e1eca66e660", "revision":1, "data":"eyJrZXkiOiJ2YWx1ZSJ9",
      "data_crc32":null}'
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/secret-manager/v1beta1/regions/fr-par/secrets/78cd6067-45ed-4e5c-85ba-1e1eca66e660/versions/1/access
    method: GET
  response:
    body: '{"secret_id":"78cd6067-45ed-4e5c-85ba-1e1eca66e660", "revision":1, "data":"eyJrZXkiOiJ2YWx1ZSJ9",
      "data_crc32":null}'
    headers:
      Content-Length:
      - "116"
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 03 Apr 2024 07:23:26 GMT
      Server:
      - Scaleway API Gateway (fr-par-3;edge02)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 04db4b5b-b26b-4526-9935-081b1b157840
    status: 200 OK
    code: 200
    duration: ""
- request:
    body: ""
    form: {}
    headers:
      User-Agent:
      - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.21.1; linux; amd64) cli-e2e-test
    url: https://api.scaleway.com/secret-manager/v1beta1/regions/fr-par/secrets/78cd6067-45ed-4e5c-85ba-1e1eca66e660
    method: DELETE
  response:
    body: ""
    headers:
      Content-Security-Policy:
      - default-src 'none'; frame-ancestors 'none'
      Content-Type:
      - application/json
      Date:
      - Wed, 03 Apr 2024 07:23:26 GMT
      Server:
      - Scaleway API Gateway (fr-par-3;edge02)
      Strict-Transport-Security:
      - max-age=63072000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - DENY
      X-Request-Id:
      - 9a46456e-434f-4736-85b7-a481de3b39f3
    status: 204 No Content
    code: 204
    duration: ""
